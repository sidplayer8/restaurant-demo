<!DOCTYPE html>
<html>

<head>
    <title>Update RBAC Schema</title>
</head>

<body>
    <h1>Update Users Table for RBAC</h1>
    <button onclick="updateSchema()"
        style="padding: 20px; font-size: 18px; background: #FF6B00; color: white; border: none; border-radius: 8px; cursor: pointer;">
        Click to Add Role Columns
    </button>
    <pre id="output"
        style="margin-top: 20px; padding: 20px; background: #1a1a1a; color: #00ff00; border-radius: 8px;"></pre>

    <script>
        async function updateSchema() {
            const output = document.getElementById('output');
            output.textContent = '⏳ Updating schema...\n';

            try {
                const response = await fetch('/api/setup/update-schema-rbac', {
                    method: 'POST'
                });

                const data = await response.json();

                if (data.success) {
                    output.textContent += '✅ Schema updated successfully!\n';
                    output.textContent += JSON.stringify(data, null, 2);
                } else {
                    output.textContent += '❌ Error: ' + JSON.stringify(data, null, 2);
                }
            } catch (error) {
                output.textContent += '❌ Error: ' + error.message;
            }
        }
    </script>
</body>

</html>