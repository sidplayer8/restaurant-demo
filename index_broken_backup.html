<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gourmet Bites v2.0</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
</head>

<body>
    <div id="app">
        <!-- Login View -->
        <section id="login-view" class="view active">
            <div class="login-container">
                <div class="brand-logo">
                    <span class="material-icons-round">restaurant</span>
                </div>
                <h1>Gourmet Bites v2.0</h1>
                <p class="subtitle">Experience the best food in town</p>

                <button id="google-login-btn" class="btn-google">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google Logo">
                    <span>Sign in with Google</span>
                </button>

                <div class="divider"><span>OR</span></div>

                <form id="login-form">
                    <!-- Step 1: Phone Number Entry -->
                    <div id="phone-step" class="auth-step">
                        <!-- Country Code Selector -->
                        <div class="input-group" style="margin-bottom: 12px;">
                            <span class="material-icons-round">public</span>
                            <select id="country-code"
                                style="width:100%; background:none; border:none; color:white; outline:none; font-family:inherit; font-size:16px; cursor:pointer;">
                                <option value="+1">ðŸ‡ºðŸ‡¸ United States (+1)</option>
                                <option value="+44">ðŸ‡¬ðŸ‡§ United Kingdom (+44)</option>
                                <option value="+91">ðŸ‡®ðŸ‡³ India (+91)</option>
                                <option value="+65" selected>ðŸ‡¸ðŸ‡¬ Singapore (+65)</option>
                                <option value="+86">ðŸ‡¨ðŸ‡³ China (+86)</option>
                                <option value="+81">ðŸ‡¯ðŸ‡µ Japan (+81)</option>
                                <option value="+82">ðŸ‡°ðŸ‡· South Korea (+82)</option>
                                <option value="+61">ðŸ‡¦ðŸ‡º Australia (+61)</option>
                                <option value="+33">ðŸ‡«ðŸ‡· France (+33)</option>
                                <option value="+49">ðŸ‡©ðŸ‡ª Germany (+49)</option>
                                <option value="+34">ðŸ‡ªðŸ‡¸ Spain (+34)</option>
                                <option value="+39">ðŸ‡®ðŸ‡¹ Italy (+39)</option>
                                <option value="+7">ðŸ‡·ðŸ‡º Russia (+7)</option>
                                <option value="+55">ðŸ‡§ðŸ‡· Brazil (+55)</option>
                                <option value="+52">ðŸ‡²ðŸ‡½ Mexico (+52)</option>
                                <option value="+27">ðŸ‡¿ðŸ‡¦ South Africa (+27)</option>
                                <option value="+60">ðŸ‡²ðŸ‡¾ Malaysia (+60)</option>
                                <option value="+63">ðŸ‡µðŸ‡­ Philippines (+63)</option>
                                <option value="+66">ðŸ‡¹ðŸ‡­ Thailand (+66)</option>
                                <option value="+84">ðŸ‡»ðŸ‡³ Vietnam (+84)</option>
                            </select>
                        </div>

                        <!-- Phone Number Input -->
                        <div class="input-group">
                            <span class="material-icons-round">phone</span>
                            <input type="tel" id="phone" placeholder="Enter phone number (without country code)"
                                required>
                        </div>

                        <button type="button" id="send-code-btn" class="btn-primary">Send Verification Code</button>

                        <p class="disclaimer" style="margin-top: 16px;">
                            <a href="#" id="admin-login-link-main"
                                style="color: var(--primary); text-decoration: none;">Admin? Click here to login</a>
                        </p>
                    </div>

                    <!-- Step 2: Verification Code -->
                    <div id="verification-step" class="auth-step hidden">
                        <button type="button" id="back-to-phone" class="btn-secondary"
                            style="margin-bottom: 16px; background: var(--bg-input); color: var(--text-muted); border: 1px solid var(--border); display: flex; align-items: center; gap: 8px;">
                            <span class="material-icons-round" style="font-size: 18px;">arrow_back</span>
                            Back
                        </button>
                        <p class="verification-info">
                            <span class="material-icons-round"
                                style="vertical-align: middle; color: var(--primary);">textsms</span>
                            We've sent a verification code to <strong id="phone-display"></strong>
                        </p>
                        <div class="input-group">
                            <span class="material-icons-round">lock</span>
                            <input type="text" id="verification-code" placeholder="Enter 6-digit code" maxlength="6"
                                pattern="[0-9]{6}">
                        </div>
                        <button type="button" id="verify-code-btn" class="btn-primary">Verify Code</button>
                        <p class="disclaimer" style="margin-top: 16px;">
                            <a href="#" id="admin-login-link"
                                style="color: var(--primary); text-decoration: none;">Admin? Click here to login</a>
                        </p>
                    </div>
                </form>
                <div id="admin-login-modal" class="modal hidden">
                    <div class="modal-content" style="max-width: 400px; margin: auto;">
                        <header class="modal-header">
                            <h2>Admin Login</h2>
                            <button id="close-admin-login" class="icon-btn">
                                <span class="material-icons-round">close</span>
                            </button>
                        </header>
                        <form id="admin-login-form">
                            <div class="input-group">
                                <span class="material-icons-round">person</span>
                                <input type="text" id="admin-user" placeholder="Username" required>
                            </div>
                            <div class="input-group">
                                <span class="material-icons-round">lock</span>
                                <input type="password" id="admin-pass" placeholder="Password" required>
                            </div>
                            <button type="submit" id="admin-login-submit-btn"
                                class="btn-primary full-width">Login</button>
                        </form>
                    </div>
                </div>

                <!-- Item Modal (Add/Edit) -->
                <div id="item-modal" class="modal hidden">
                    <div class="modal-content">
                        <header class="modal-header">
                            <h2 id="item-modal-title">Edit Item</h2>
                            <button id="close-item-modal" class="icon-btn">
                                <span class="material-icons-round">close</span>
                            </button>
                        </header>
                        <form id="item-form">
                            <input type="hidden" id="item-id">

                            <div class="input-group">
                                <span class="material-icons-round">label</span>
                                <input type="text" id="item-name" placeholder="Item Name" required>
                            </div>

                            <div class="input-group">
                                <span class="material-icons-round">category</span>
                                <select id="item-category" required
                                    style="width:100%; background:none; border:none; color:white; outline:none; font-family:inherit;">
                                    <!-- Options injected by JS -->
                                </select>
                            </div>

                            <div class="input-group">
                                <span class="material-icons-round">image</span>
                                <input type="text" id="item-image" placeholder="Image URL (e.g. burger.jpg)" required>
                            </div>

                            <div class="input-group">
                                <span class="material-icons-round">description</span>
                                <textarea id="item-desc" placeholder="Description" rows="3"
                                    style="width:100%; background:none; border:none; color:white; outline:none; font-family:inherit; resize:none;"></textarea>
                            </div>

                            <div class="input-group">
                                <span class="material-icons-round">warning</span>
                                <input type="text" id="item-allergens" placeholder="Allergens (comma separated)">
                            </div>

                            <div class="input-group">
                                <span class="material-icons-round">attach_money</span>
                                <input type="number" id="item-price" placeholder="Price" step="0.01" required>
                            </div>

                            <button type="submit" class="btn-primary full-width">Save Item</button>
                            <button type="button" id="delete-item-btn" class="btn-secondary full-width hidden"
                                style="margin-top:10px; background:rgba(255,0,0,0.2); color:#ff6b6b;">Delete
                                Item</button>
                        </form>
                    </div>
                </div>

                <!-- Main View (Menu) -->
                <section id="main-view" class="view hidden">
                    <header class="app-header">
                        <div class="header-content">
                            <div class="user-info">
                                <div id="user-avatar" class="user-avatar hidden">
                                    <img src="" alt="User">
                                </div>
                                <div id="default-avatar" class="user-avatar default">
                                    <span class="material-icons-round">person</span>
                                </div>
                                <div class="user-text">
                                    <span class="greeting">Welcome back,</span>
                                    <span id="user-phone" class="user-phone">Guest</span>
                                </div>
                            </div>
                            <button id="logout-btn" class="icon-btn">
                                <span class="material-icons-round">logout</span>
                            </button>
                        </div>

                        <div class="category-scroll">
                            <!-- Categories injected by JS -->
                        </div>
                    </header>

                    <main class="menu-container">
                        <div id="menu-grid" class="menu-grid">
                            <!--Menu items injected by JS -->
                        </div>
                    </main>
                </section>

                <!-- Profile View -->
                <section id="profile-view" class="view hidden">
                    <header class="app-header">
                        <div class="header-content">
                            <h2>My Profile</h2>
                            <button id="logout-btn-profile" class="icon-btn">
                                <span class="material-icons-round">logout</span>
                            </button>
                        </div>
                    </header>

                    <div class="profile-container">
                        <div class="profile-card">
                            <div class="profile-avatar">
                                <img id="profile-img-large" src="" alt="Profile" class="hidden">
                                <span id="profile-initial" class="material-icons-round">person</span>
                            </div>
                            <h3 id="profile-name">Guest User</h3>
                            <p id="profile-phone">No phone linked</p>
                        </div>

                        <div class="section-title">Order History</div>
                        <div id="order-history" class="order-list">
                            <!-- Orders injected by JS -->
                        </div>
                    </div>
                </section>

                <!-- Bottom Navigation -->
                <nav id="bottom-nav" class="bottom-nav hidden">
                    <button class="nav-item active" onclick="switchTab('menu')">
                        <span class="material-icons-round">restaurant_menu</span>
                        <span>Menu</span>
                    </button>
                    <button class="nav-item" onclick="switchTab('cart')">
                        <span class="material-icons-round">shopping_bag</span>
                        <span>Cart</span>
                        <span id="nav-cart-count" class="badge hidden">0</span>
                    </button>
                    <button class="nav-item" onclick="switchTab('profile')">
                        <span class="material-icons-round">person</span>
                        <span>Profile</span>
                    </button>
                </nav>

                <!-- Cart Modal -->
                <div id="cart-modal" class="modal hidden">
                    <div class="modal-content">
                        <header class="modal-header">
                            <h2>Your Order</h2>
                            <button id="close-cart" class="icon-btn">
                                <span class="material-icons-round">close</span>
                            </button>
                        </header>
                        <div id="cart-items" class="cart-items">
                            <!-- Cart items injected by JS -->
                        </div>
                        <footer class="modal-footer">
                            <div class="total-row">
                                <span>Total</span>
                                <span id="modal-total">$0.00</span>
                            </div>
                            <button id="checkout-btn" class="btn-primary full-width">Place Order</button>
                        </footer>
                    </div>
                </div>

                <!-- Customization Modal -->
                <div id="customize-modal" class="modal hidden">
                    <div class="modal-content">
                        <header class="modal-header">
                            <h2 id="customize-title">Customize Item</h2>
                            <button id="close-customize" class="icon-btn">
                                <span class="material-icons-round">close</span>
                            </button>
                        </header>
                        <div class="customize-body">
                            <div id="customize-allergens" class="allergen-warning hidden">
                                <span class="material-icons-round">warning</span>
                                <span id="allergen-text"></span>
                            </div>

                            <div class="customize-section">
                                <h3>Special Instructions</h3>
                                <textarea id="special-instructions"
                                    placeholder="E.g. No onions, sauce on side..."></textarea>
                            </div>

                            <div class="customize-section">
                                <h3>Preferences</h3>
                                <div id="customize-options" class="options-list">
                                    <!-- Options injected by JS -->
                                </div>
                            </div>
                        </div>
                        <footer class="modal-footer">
                            <div class="total-row">
                                <span>Total</span>
                                <span id="customize-total">$0.00</span>
                            </div>
                            <button id="add-custom-btn" class="btn-primary full-width">Add to Order</button>
                        </footer>
                    </div>
                </div>

                <!-- Floating Action Button (Cart) -->
                <div id="cart-fab" class="cart-fab hidden">
                    <div class="cart-info">
                        <span class="item-count">0 Items</span>
                        <span class="cart-total">$0.00</span>
                    </div>
                    <button id="view-cart-btn">View Cart</button>
                </div>
            </div>

            <!-- Firebase Compat SDKs for file:// protocol support -->
            <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
            <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

            <script src="firebase-config.js"></script>
            <script src="firebase-phone-auth.js"></script>
            <script src="script.js"></script>
</body>

</html>